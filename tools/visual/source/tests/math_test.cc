#include "../math/math.hpp"

#include <gtest/gtest.h>

TEST(MathTest, random_int)
{
    constexpr int number = 100;
    for(int a = 0; a < number; a++)
    {
        for(int b = 0; b <= a; b++)
        {
            int val = Math::random(b, a);
            EXPECT_LE(val, a);
            EXPECT_GE(val, b);
        }
    }
}

TEST(MathTest, random_float)
{
    constexpr int number = 100;
    constexpr int accuracy = 1000;
    for(int a = 0; a < number; a++)
    {
        for(int b = 0; b <= a; b++)
        {
            float val = Math::random_float(static_cast<float>(b),
                                           static_cast<float>(a), 1000);
            EXPECT_LE(val, a);
            EXPECT_GE(val, b);
        }
    }

    for(int a = 0; a < number; a++)
    {
        for(int b = 0; b <= a; b++)
        {
            float b_ = static_cast<float>(b) / accuracy;
            float a_ = static_cast<float>(a) / accuracy;

            float val = Math::random_float(b_, a_, accuracy);
            EXPECT_LE(val, a_);
            EXPECT_GE(val, b_);
        }
    }
}

TEST(MathTest, fade_small)
{
    EXPECT_NEAR(Math::fade(5.8340001106262207), 25158.652097434879, 0.0001);
    EXPECT_NEAR(Math::fade(9.3269996643066406), 318104.75202831201, 0.0001);
    EXPECT_NEAR(Math::fade(1.5750000476837158), 4.9179177552748685, 0.0001);
    EXPECT_NEAR(Math::fade(4.6440000534057617), 6984.9161228563662, 0.0001);
    EXPECT_NEAR(Math::fade(7.9939999580383301), 139724.42253729163, 0.0001);
    EXPECT_NEAR(Math::fade(7.7039999961853027), 114562.55777561247, 0.0001);
    EXPECT_NEAR(Math::fade(4.4869999885559082), 5735.892266243789, 0.0001);
    EXPECT_NEAR(Math::fade(2.3499999046325684), 102.33051557950459, 0.0001);
    EXPECT_NEAR(Math::fade(5.619999885559082), 20449.632298788725, 0.0001);
    EXPECT_NEAR(Math::fade(7.8379998207092285), 125694.19999868295, 0.0001);
    EXPECT_NEAR(Math::fade(4.7670001983642578), 8107.2505857676961, 0.0001);
    EXPECT_NEAR(Math::fade(4.1919999122619629), 3871.6479226993401, 0.0001);
    EXPECT_NEAR(Math::fade(3.3110001087188721), 947.77785415912228, 0.0001);
    EXPECT_NEAR(Math::fade(5.8720002174377441), 26078.455179362281, 0.0001);
    EXPECT_NEAR(Math::fade(9.0699996948242188), 274236.77027332084, 0.0001);
    EXPECT_NEAR(Math::fade(5.2160000801086426), 13481.434261074941, 0.0001);
    EXPECT_NEAR(Math::fade(7.6550002098083496), 110694.62015748232, 0.0001);
    EXPECT_NEAR(Math::fade(8.074000358581543), 147389.32265787729, 0.0001);
    EXPECT_NEAR(Math::fade(2.5759999752044678), 191.01686404347649, 0.0001);
    EXPECT_NEAR(Math::fade(4.9239997863769531), 9743.6613351574924, 0.0001);
    EXPECT_NEAR(Math::fade(0.89099997282028198), 0.98907475728684957, 0.0001);
    EXPECT_NEAR(Math::fade(0.3580000102519989), 0.24772004421133642, 0.0001);
    EXPECT_NEAR(Math::fade(7.6550002098083496), 110694.62015748232, 0.0001);
    EXPECT_NEAR(Math::fade(9.366999626159668), 325409.25276217109, 0.0001);
    EXPECT_NEAR(Math::fade(7.6389999389648438), 109454.44438676393, 0.0001);
    EXPECT_NEAR(Math::fade(1.8279999494552612), 16.062099653802871, 0.0001);
    EXPECT_NEAR(Math::fade(5.4710001945495605), 17608.157186575521, 0.0001);
    EXPECT_NEAR(Math::fade(7.0190000534057617), 69268.413418318916, 0.0001);
    EXPECT_NEAR(Math::fade(0.74900001287460327), 0.89542688990854757, 0.0001);
    EXPECT_NEAR(Math::fade(5.3429999351501465), 15427.028476047957, 0.0001);
    EXPECT_NEAR(Math::fade(6.8060002326965332), 58588.810641636002, 0.0001);
    EXPECT_NEAR(Math::fade(5.3369998931884766), 15330.348212845554, 0.0001);
    EXPECT_NEAR(Math::fade(5.2560000419616699), 14071.781878938469, 0.0001);
    EXPECT_NEAR(Math::fade(1.9859999418258667), 30.354918313377116, 0.0001);
    EXPECT_NEAR(Math::fade(3.9860000610351562), 2884.0121803018251, 0.0001);
    EXPECT_NEAR(Math::fade(7.7109999656677246), 115123.82028376914, 0.0001);
    EXPECT_NEAR(Math::fade(7.6370000839233398), 109300.21980679712, 0.0001);
    EXPECT_NEAR(Math::fade(1.4490000009536743), 2.6243250929886797, 0.0001);
    EXPECT_NEAR(Math::fade(7.0199999809265137), 69321.97124929534, 0.0001);
    EXPECT_NEAR(Math::fade(2.3289999961853027), 96.143199216437765, 0.0001);
    EXPECT_NEAR(Math::fade(4.3039999008178711), 4511.5890305798312, 0.0001);
    EXPECT_NEAR(Math::fade(0.37200000882148743), 0.27027961601315231, 0.0001);
    EXPECT_NEAR(Math::fade(2.5590000152587891), 182.75607768195357, 0.0001);
    EXPECT_NEAR(Math::fade(6.5840001106262207), 48900.568969799497, 0.0001);
    EXPECT_NEAR(Math::fade(4.8080000877380371), 8511.6841311932858, 0.0001);
    EXPECT_NEAR(Math::fade(0.43000000715255737), 0.37045492869048413, 0.0001);
    EXPECT_NEAR(Math::fade(8.8739995956420898), 244147.78994684984, 0.0001);
    EXPECT_NEAR(Math::fade(0.63700002431869507), 0.74430784435473663, 0.0001);
    EXPECT_NEAR(Math::fade(6.3969998359680176), 41772.734202386586, 0.0001);
    EXPECT_NEAR(Math::fade(4.6710000038146973), 7219.9703217505585, 0.0001);
    EXPECT_NEAR(Math::fade(9.0190000534057617), 266137.17403315194, 0.0001);
    EXPECT_NEAR(Math::fade(8.9709997177124023), 258689.65279262728, 0.0001);
    EXPECT_NEAR(Math::fade(9.3400001525878906), 320464.28101389384, 0.0001);
    EXPECT_NEAR(Math::fade(6.4429998397827148), 43443.674649247805, 0.0001);
    EXPECT_NEAR(Math::fade(1.343000054359436), 1.6396410931228216, 0.0001);
    EXPECT_NEAR(Math::fade(7.9229998588562012), 133191.70743752364, 0.0001);
    EXPECT_NEAR(Math::fade(5.6009998321533203), 20068.23442809016, 0.0001);
    EXPECT_NEAR(Math::fade(8.6789999008178711), 216890.19952672243, 0.0001);
    EXPECT_NEAR(Math::fade(6.0250000953674316), 30057.218468213978, 0.0001);
    EXPECT_NEAR(Math::fade(8.3409996032714844), 175436.21316399422, 0.0001);
    EXPECT_NEAR(Math::fade(6.6710000038146973), 52531.472697254758, 0.0001);
    EXPECT_NEAR(Math::fade(2.6510000228881836), 231.05434579106188, 0.0001);
    EXPECT_NEAR(Math::fade(3.9579999446868896), 2766.9512942480151, 0.0001);
    EXPECT_NEAR(Math::fade(3.0169999599456787), 531.62187958535822, 0.0001);
    EXPECT_NEAR(Math::fade(0.93500000238418579), 0.99751454789543681, 0.0001);
    EXPECT_NEAR(Math::fade(2.8269999027252197), 351.24651795623356, 0.0001);
    EXPECT_NEAR(Math::fade(5.2319998741149902), 13715.152352544899, 0.0001);
    EXPECT_NEAR(Math::fade(1.0579999685287476), 1.0021248020254219, 0.0001);
    EXPECT_NEAR(Math::fade(3.2829999923706055), 899.59816631929675, 0.0001);
    EXPECT_NEAR(Math::fade(3.5989999771118164), 1572.4799523114111, 0.0001);
    EXPECT_NEAR(Math::fade(5.0760002136230469), 11568.728823415393, 0.0001);
    EXPECT_NEAR(Math::fade(2.4860000610351562), 150.43133245029199, 0.0001);
    EXPECT_NEAR(Math::fade(3.9820001125335693), 2867.052709666722, 0.0001);
    EXPECT_NEAR(Math::fade(9.2589998245239258), 305988.24732249504, 0.0001);
    EXPECT_NEAR(Math::fade(0.72200000286102295), 0.86478007511564547, 0.0001);
    EXPECT_NEAR(Math::fade(3.3859999179840088), 1086.9722484806282, 0.0001);
    EXPECT_NEAR(Math::fade(6.2820000648498535), 37818.934553402731, 0.0001);
    EXPECT_NEAR(Math::fade(4.684999942779541), 7344.305427506526, 0.0001);
    EXPECT_NEAR(Math::fade(5.0479998588562012), 11213.574366401654, 0.0001);
    EXPECT_NEAR(Math::fade(9.0489997863769531), 270878.12161381083, 0.0001);
    EXPECT_NEAR(Math::fade(8.7390003204345703), 225003.91755703904, 0.0001);
    EXPECT_NEAR(Math::fade(4.0830001831054688), 3320.3435616870738, 0.0001);
    EXPECT_NEAR(Math::fade(0.32899999618530273), 0.20349878240366898, 0.0001);
    EXPECT_NEAR(Math::fade(7.2659997940063477), 83541.292083435939, 0.0001);
    EXPECT_NEAR(Math::fade(6.2989997863769531), 38383.778794671074, 0.0001);
    EXPECT_NEAR(Math::fade(3.8900001049041748), 2498.3360441682589, 0.0001);
    EXPECT_NEAR(Math::fade(8.9820003509521484), 260381.5661718245, 0.0001);
    EXPECT_NEAR(Math::fade(6.1420001983642578), 33414.879520182491, 0.0001);
    EXPECT_NEAR(Math::fade(3.8239998817443848), 2257.859045373646, 0.0001);
    EXPECT_NEAR(Math::fade(9.6789999008178711), 387107.04579548223, 0.0001);
    EXPECT_NEAR(Math::fade(0.61500000953674316), 0.70814132247083128, 0.0001);
    EXPECT_NEAR(Math::fade(6.4800000190734863), 44826.044010324214, 0.0001);
    EXPECT_NEAR(Math::fade(2.7339999675750732), 282.80406325010858, 0.0001);
    EXPECT_NEAR(Math::fade(0.46599999070167542), 0.43644623011395761, 0.0001);
    EXPECT_NEAR(Math::fade(0.63099998235702515), 0.73461599324301829, 0.0001);
    EXPECT_NEAR(Math::fade(0.29800000786781311), 0.16044411103337339, 0.0001);
    EXPECT_NEAR(Math::fade(3.0910000801086426), 619.01700222776628, 0.0001);
    EXPECT_NEAR(Math::fade(9.5909996032714844), 368832.19996644568, 0.0001);
    EXPECT_NEAR(Math::fade(0.77799999713897705), 0.92378789562180841, 0.0001);
    EXPECT_NEAR(Math::fade(3.4460000991821289), 1209.6031806767301, 0.0001);
}

TEST(MathTest, fade_big)
{
    EXPECT_NEAR(Math::fade(-114.20899963378906), -119154708136.55167, 0.0001);
    EXPECT_NEAR(Math::fade(-671.697998046875), -823448652087583.12, 0.0001);
    EXPECT_NEAR(Math::fade(-276.44900512695312), -9775648532266.9141, 0.0001);
    EXPECT_NEAR(Math::fade(-327.15200805664062), -22657503141550.852, 0.0001);
    EXPECT_NEAR(Math::fade(216.84700012207031), 2843792512062.4575, 0.0001);
    EXPECT_NEAR(Math::fade(106.45999908447266), 80136200111.317932, 0.0001);
    EXPECT_NEAR(Math::fade(263.58401489257812), 7561680548997.2969, 0.0001);
    EXPECT_NEAR(Math::fade(181.58399963378906), 1168262952975.2424, 0.0001);
    EXPECT_NEAR(Math::fade(25.120000839233398), 54199397.420518965, 0.0001);
    EXPECT_NEAR(Math::fade(380.66400146484375), 47643504282898.602, 0.0001);
    EXPECT_NEAR(Math::fade(-771.2550048828125), -1642660884439691, 0.0001);
    EXPECT_NEAR(Math::fade(-531.14801025390625), -254841958523713.56, 0.0001);
    EXPECT_NEAR(Math::fade(-422.760986328125), -81506159201061.453, 0.0001);
    EXPECT_NEAR(Math::fade(149.51199340820312), 440799480500.72198, 0.0001);
    EXPECT_NEAR(Math::fade(-967.9749755859375), -5112023973976704, 0.0001);
    EXPECT_NEAR(Math::fade(-368.84500122070312), -41239151901357.906, 0.0001);
    EXPECT_NEAR(Math::fade(-651.22900390625), -705481520935236.75, 0.0001);
    EXPECT_NEAR(Math::fade(959.8699951171875), 4876200051832586, 0.0001);
    EXPECT_NEAR(Math::fade(-647.81097412109375), -687174847439938.5, 0.0001);
    EXPECT_NEAR(Math::fade(-383.71499633789062), -50236613791917.711, 0.0001);
    EXPECT_NEAR(Math::fade(710.4310302734375), 1082010132702014.5, 0.0001);
    EXPECT_NEAR(Math::fade(455.67300415039062), 117228170278663.61, 0.0001);
    EXPECT_NEAR(Math::fade(440.81399536132812), 99302877268621.312, 0.0001);
    EXPECT_NEAR(Math::fade(-15.560000419616699), -6389628.0432276437, 0.0001);
    EXPECT_NEAR(Math::fade(812.82501220703125), 2122266069517022.5, 0.0001);
    EXPECT_NEAR(Math::fade(-114.03800201416016), -118269205315.17303, 0.0001);
    EXPECT_NEAR(Math::fade(302.75201416015625), 15135379224730.5, 0.0001);
    EXPECT_NEAR(Math::fade(-760.6290283203125), -1532646697190329, 0.0001);
    EXPECT_NEAR(Math::fade(-794.20501708984375), -1901868350529441, 0.0001);
    EXPECT_NEAR(Math::fade(322.43701171875), 20749245115808.918, 0.0001);
    EXPECT_NEAR(Math::fade(876.06402587890625), 3087381701030194, 0.0001);
    EXPECT_NEAR(Math::fade(515.9630126953125), 218342071788718.06, 0.0001);
    EXPECT_NEAR(Math::fade(-541.010986328125), -279374251474472.88, 0.0001);
    EXPECT_NEAR(Math::fade(-542.1199951171875), -282246774060103.5, 0.0001);
    EXPECT_NEAR(Math::fade(-522.96697998046875), -235828554321788.31, 0.0001);
    EXPECT_NEAR(Math::fade(64.974998474121094), 6683760692.1406937, 0.0001);
    EXPECT_NEAR(Math::fade(125.62000274658203), 183976290772.15158, 0.0001);
    EXPECT_NEAR(Math::fade(836.2030029296875), 2445741460227135, 0.0001);
    EXPECT_NEAR(Math::fade(641.71697998046875), 650392376076952, 0.0001);
    EXPECT_NEAR(Math::fade(-485.25799560546875), -162274210855656.88, 0.0001);
    EXPECT_NEAR(Math::fade(-505.56900024414062), -199158346622314.03, 0.0001);
    EXPECT_NEAR(Math::fade(970.32501220703125), 5147753806757690, 0.0001);
    EXPECT_NEAR(Math::fade(212.66000366210938), 2579056052698.3042, 0.0001);
    EXPECT_NEAR(Math::fade(420.656005859375), 78560109419075.594, 0.0001);
    EXPECT_NEAR(Math::fade(25.554000854492188), 59150727.385577895, 0.0001);
    EXPECT_NEAR(Math::fade(-792.73199462890625), -1884307557285151, 0.0001);
    EXPECT_NEAR(Math::fade(-32.845001220703125), -247160709.16574818, 0.0001);
    EXPECT_NEAR(Math::fade(-400.19000244140625), -61971431610265.102, 0.0001);
    EXPECT_NEAR(Math::fade(615.25897216796875), 526835063655946.12, 0.0001);
    EXPECT_NEAR(Math::fade(529.40997314453125), 248346896704804.22, 0.0001);
    EXPECT_NEAR(Math::fade(270.25698852539062), 8570571852208.2109, 0.0001);
    EXPECT_NEAR(Math::fade(983.2760009765625), 5500771296363659, 0.0001);
    EXPECT_NEAR(Math::fade(625.301025390625), 571293116589470.88, 0.0001);
    EXPECT_NEAR(Math::fade(715.72900390625), 1122990625818147.9, 0.0001);
    EXPECT_NEAR(Math::fade(-513.26202392578125), -214763204126340.94, 0.0001);
    EXPECT_NEAR(Math::fade(-126.09999847412109), -195117926421.52081, 0.0001);
    EXPECT_NEAR(Math::fade(-448.36300659179688), -109324758038775.88, 0.0001);
    EXPECT_NEAR(Math::fade(690.24102783203125), 936657444087485.75, 0.0001);
    EXPECT_NEAR(Math::fade(-636.0989990234375), -627306971997032.5, 0.0001);
    EXPECT_NEAR(Math::fade(369.55599975585938), 41078061759819.203, 0.0001);
    EXPECT_NEAR(Math::fade(-307.23300170898438), -16558378057762.779, 0.0001);
    EXPECT_NEAR(Math::fade(499.89700317382812), 186371481962360.75, 0.0001);
    EXPECT_NEAR(Math::fade(-962.551025390625), -4970468777672406, 0.0001);
    EXPECT_NEAR(Math::fade(121.58799743652344), 156182385338.60431, 0.0001);
    EXPECT_NEAR(Math::fade(-5.7589998245239258), -56418.878011189721, 0.0001);
    EXPECT_NEAR(Math::fade(317.52999877929688), 19215400674050.602, 0.0001);
    EXPECT_NEAR(Math::fade(-871.32501220703125), -3022020436564633.5, 0.0001);
    EXPECT_NEAR(Math::fade(960.99700927734375), 4904908868192861, 0.0001);
    EXPECT_NEAR(Math::fade(302.42599487304688), 15053927160747.971, 0.0001);
    EXPECT_NEAR(Math::fade(-890.39697265625), -3367349621963729, 0.0001);
    EXPECT_NEAR(Math::fade(-979.1090087890625), -5412709574748633, 0.0001);
    EXPECT_NEAR(Math::fade(-824.68499755859375), -2295658783167024, 0.0001);
    EXPECT_NEAR(Math::fade(653.67901611328125), 713364549389373, 0.0001);
    EXPECT_NEAR(Math::fade(416.1400146484375), 74427925242236.062, 0.0001);
    EXPECT_NEAR(Math::fade(114.36199951171875), 114819953162.32011, 0.0001);
    EXPECT_NEAR(Math::fade(990.156982421875), 5696057261052259, 0.0001);
    EXPECT_NEAR(Math::fade(-897.510986328125), -3503959284117232, 0.0001);
    EXPECT_NEAR(Math::fade(-17.808000564575195), -12310507.015315464, 0.0001);
    EXPECT_NEAR(Math::fade(-980.49298095703125), -5451052619067834, 0.0001);
    EXPECT_NEAR(Math::fade(214.06300354003906), 2665467649653.668, 0.0001);
    EXPECT_NEAR(Math::fade(-968.875), -5135821736459735, 0.0001);
    EXPECT_NEAR(Math::fade(366.77999877929688), 39556200825659.008, 0.0001);
    EXPECT_NEAR(Math::fade(-323.125), -21298945978738.672, 0.0001);
    EXPECT_NEAR(Math::fade(269.72500610351562), 8486394853008.1914, 0.0001);
    EXPECT_NEAR(Math::fade(-191.38099670410156), -1560634664559.5518, 0.0001);
    EXPECT_NEAR(Math::fade(-575.614013671875), -380795981513205.31, 0.0001);
    EXPECT_NEAR(Math::fade(-31.552000045776367), -202803116.51385143, 0.0001);
    EXPECT_NEAR(Math::fade(487.9949951171875), 165196383063169.03, 0.0001);
    EXPECT_NEAR(Math::fade(-265.60501098632812), -8005922899056.4277, 0.0001);
    EXPECT_NEAR(Math::fade(-533.95001220703125), -261628734168034.44, 0.0001);
    EXPECT_NEAR(Math::fade(794.50701904296875), 1893530846705333.5, 0.0001);
    EXPECT_NEAR(Math::fade(210.51499938964844), 2451289539383.1938, 0.0001);
    EXPECT_NEAR(Math::fade(-994.4580078125), -5850252939551208, 0.0001);
    EXPECT_NEAR(Math::fade(-86.781997680664062), -30389750318.0658, 0.0001);
    EXPECT_NEAR(Math::fade(859.1300048828125), 2800148499533802.5, 0.0001);
    EXPECT_NEAR(Math::fade(-538.93902587890625), -274070201294594.88, 0.0001);
    EXPECT_NEAR(Math::fade(585.583984375), 411378172330068.5, 0.0001);
    EXPECT_NEAR(Math::fade(40.224998474121094), 593254926.10509133, 0.0001);
    EXPECT_NEAR(Math::fade(-3.497999906539917), -5816.1306682557433, 0.0001);
    EXPECT_NEAR(Math::fade(-684.07501220703125), -902102096829542.12, 0.0001);
    EXPECT_NEAR(Math::fade(901.81097412109375), 3568815526145155.5, 0.0001);
    EXPECT_NEAR(Math::fade(638.79400634765625), 635702901933401, 0.0001);
    EXPECT_NEAR(Math::fade(985.094970703125), 5551865578028805, 0.0001);
    EXPECT_NEAR(Math::fade(969.6309814453125), 5129360844380473, 0.0001);
    EXPECT_NEAR(Math::fade(120.28500366210938), 147957941228.51096, 0.0001);
    EXPECT_NEAR(Math::fade(-347.1400146484375), -30464710362414.543, 0.0001);
    EXPECT_NEAR(Math::fade(988.7020263671875), 5654309545538797, 0.0001);
    EXPECT_NEAR(Math::fade(-902.81201171875), -3608608212705229, 0.0001);
    EXPECT_NEAR(Math::fade(367.63101196289062), 40017865684310.727, 0.0001);
    EXPECT_NEAR(Math::fade(86.083000183105469), 27544784150.154716, 0.0001);
    EXPECT_NEAR(Math::fade(-960.7020263671875), -4922936649752248, 0.0001);
    EXPECT_NEAR(Math::fade(307.2550048828125), 16296925881698.129, 0.0001);
    EXPECT_NEAR(Math::fade(-730.74102783203125), -1254449912857759, 0.0001);
    EXPECT_NEAR(Math::fade(-618.708984375), -546180954302935.62, 0.0001);
    EXPECT_NEAR(Math::fade(-782.80401611328125), -1769303867083571, 0.0001);
    EXPECT_NEAR(Math::fade(-837.50201416015625), -2479568139485379.5, 0.0001);
    EXPECT_NEAR(Math::fade(342.05300903320312), 27889371468745.93, 0.0001);
    EXPECT_NEAR(Math::fade(-46.126998901367188), -1321819325.7967696, 0.0001);
    EXPECT_NEAR(Math::fade(918.50201416015625), 3911731085664609, 0.0001);
    EXPECT_NEAR(Math::fade(-536.32098388671875), -267483756068062.16, 0.0001);
    EXPECT_NEAR(Math::fade(-676.60797119140625), -853965043708718, 0.0001);
    EXPECT_NEAR(Math::fade(-293.49099731445312), -13177020471127.652, 0.0001);
    EXPECT_NEAR(Math::fade(-166.92799377441406), -789366526860.7688, 0.0001);
    EXPECT_NEAR(Math::fade(-913.8790283203125), -3835147762876975, 0.0001);
    EXPECT_NEAR(Math::fade(66.36199951171875), 7434339233.7041006, 0.0001);
    EXPECT_NEAR(Math::fade(269.8070068359375), 8499326746782.2568, 0.0001);
    EXPECT_NEAR(Math::fade(-404.86599731445312), -65672814820577.234, 0.0001);
    EXPECT_NEAR(Math::fade(-121.43199920654297), -161701995949.85492, 0.0001);
    EXPECT_NEAR(Math::fade(418.15899658203125), 76253253675470.203, 0.0001);
    EXPECT_NEAR(Math::fade(-904.4949951171875), -3642350168428202.5, 0.0001);
    EXPECT_NEAR(Math::fade(-775.60302734375), -1689458534218893.2, 0.0001);
    EXPECT_NEAR(Math::fade(472.78298950195312), 140981181510750.12, 0.0001);
    EXPECT_NEAR(Math::fade(165.76699829101562), 739722273445.50708, 0.0001);
    EXPECT_NEAR(Math::fade(-225.48699951171875), -3536400502061.8452, 0.0001);
    EXPECT_NEAR(Math::fade(881.5419921875), 3185178864721440, 0.0001);
    EXPECT_NEAR(Math::fade(934.92901611328125), 4274471392657731.5, 0.0001);
    EXPECT_NEAR(Math::fade(792.54400634765625), 1870239532949112, 0.0001);
    EXPECT_NEAR(Math::fade(739.5579833984375), 1322949148468095.8, 0.0001);
    EXPECT_NEAR(Math::fade(227.95599365234375), 3652844473374.4106, 0.0001);
    EXPECT_NEAR(Math::fade(-319.84698486328125), -20241883796940.742, 0.0001);
    EXPECT_NEAR(Math::fade(928.23199462890625), 4123476288827302, 0.0001);
    EXPECT_NEAR(Math::fade(-878.9210205078125), -3155985458167986, 0.0001);
    EXPECT_NEAR(Math::fade(-619.655029296875), -550366079926821.75, 0.0001);
    EXPECT_NEAR(Math::fade(-207.93499755859375), -2360457187083.0483, 0.0001);
    EXPECT_NEAR(Math::fade(-653.39801025390625), -717299425863502.12, 0.0001);
    EXPECT_NEAR(Math::fade(414.41598510742188), 72897079962653.641, 0.0001);
    EXPECT_NEAR(Math::fade(710.406982421875), 1081826887622992.6, 0.0001);
    EXPECT_NEAR(Math::fade(-707.2979736328125), -1065852486627720.8, 0.0001);
    EXPECT_NEAR(Math::fade(25.959999084472656), 64103953.173677638, 0.0001);
    EXPECT_NEAR(Math::fade(-873.33697509765625), -3057052258695910, 0.0001);
    EXPECT_NEAR(Math::fade(216.50599670410156), 2821451142516.0552, 0.0001);
    EXPECT_NEAR(Math::fade(-872.66400146484375), -3045298635704073, 0.0001);
    EXPECT_NEAR(Math::fade(952.08502197265625), 4681541080252461, 0.0001);
    EXPECT_NEAR(Math::fade(-27.315999984741211), -99806048.253179297, 0.0001);
    EXPECT_NEAR(Math::fade(-105.84100341796875), -81587385486.457458, 0.0001);
    EXPECT_NEAR(Math::fade(-782.864013671875), -1769981574787131.5, 0.0001);
    EXPECT_NEAR(Math::fade(-592.41497802734375), -439655315646831.5, 0.0001);
    EXPECT_NEAR(Math::fade(-120.63099670410156), -156459896424.2908, 0.0001);
    EXPECT_NEAR(Math::fade(852.6729736328125), 2696432387701796, 0.0001);
    EXPECT_NEAR(Math::fade(-923.15301513671875), -4033620982560034, 0.0001);
    EXPECT_NEAR(Math::fade(-953.92401123046875), -4751794347644464, 0.0001);
    EXPECT_NEAR(Math::fade(765.89898681640625), 1576122785759977, 0.0001);
    EXPECT_NEAR(Math::fade(-296.59600830078125), -13887729025666.498, 0.0001);
    EXPECT_NEAR(Math::fade(774.291015625), 1664443510987282.2, 0.0001);
    EXPECT_NEAR(Math::fade(-519.10198974609375), -227250023750392.47, 0.0001);
    EXPECT_NEAR(Math::fade(-828.41900634765625), -2348070932326590, 0.0001);
    EXPECT_NEAR(Math::fade(791.28399658203125), 1855410586829781.8, 0.0001);
    EXPECT_NEAR(Math::fade(882.2750244140625), 3198451377354651, 0.0001);
    EXPECT_NEAR(Math::fade(-536.17401123046875), -267117793072443.5, 0.0001);
    EXPECT_NEAR(Math::fade(779.68902587890625), 1723315486396792.5, 0.0001);
    EXPECT_NEAR(Math::fade(-426.72000122070312), -85390027241691.641, 0.0001);
    EXPECT_NEAR(Math::fade(-851.4580078125), -2693033144110350.5, 0.0001);
    EXPECT_NEAR(Math::fade(-82.454002380371094), -23565973280.990746, 0.0001);
    EXPECT_NEAR(Math::fade(553.708984375), 310882439388005.69, 0.0001);
    EXPECT_NEAR(Math::fade(-298.58599853515625), -14359113103684.559, 0.0001);
    EXPECT_NEAR(Math::fade(-371.59500122070312), -42797442278580.023, 0.0001);
    EXPECT_NEAR(Math::fade(-796.2239990234375), -1926150316636045.5, 0.0001);
    EXPECT_NEAR(Math::fade(736.37799072265625), 1294731312578776.2, 0.0001);
    EXPECT_NEAR(Math::fade(-663.32501220703125), -773425505295569.88, 0.0001);
    EXPECT_NEAR(Math::fade(636.25799560546875), 623174263221880.12, 0.0001);
    EXPECT_NEAR(Math::fade(40.2760009765625), 597073894.21455562, 0.0001);
    EXPECT_NEAR(Math::fade(528.7139892578125), 246717211489323.41, 0.0001);
    EXPECT_NEAR(Math::fade(978.791015625), 5376395361126644, 0.0001);
    EXPECT_NEAR(Math::fade(584.927978515625), 409077115721313, 0.0001);
    EXPECT_NEAR(Math::fade(19.482000350952148), 14752193.706642687, 0.0001);
    EXPECT_NEAR(Math::fade(-257.08200073242188), -6803358502122.8877, 0.0001);
    EXPECT_NEAR(Math::fade(-303.385986328125), -15548936745001.92, 0.0001);
    EXPECT_NEAR(Math::fade(897.1810302734375), 3478089161089864, 0.0001);
    EXPECT_NEAR(Math::fade(377.2130126953125), 45519953635180.547, 0.0001);
    EXPECT_NEAR(Math::fade(-438.63299560546875), -97978260671228.109, 0.0001);
    EXPECT_NEAR(Math::fade(887.65802001953125), 3297279066918482, 0.0001);
    EXPECT_NEAR(Math::fade(837.62701416015625), 2466649930357915, 0.0001);
    EXPECT_NEAR(Math::fade(698.21600341796875), 992073683089072.38, 0.0001);
    EXPECT_NEAR(Math::fade(-928.4439697265625), -4150481000694148, 0.0001);
    EXPECT_NEAR(Math::fade(-90.053001403808594), -36527618824.669998, 0.0001);
    EXPECT_NEAR(Math::fade(521.95098876953125), 231322243600077.28, 0.0001);
    EXPECT_NEAR(Math::fade(865.75701904296875), 2909888995049100, 0.0001);
    EXPECT_NEAR(Math::fade(659.2769775390625), 744461911747810.5, 0.0001);
    EXPECT_NEAR(Math::fade(513.44598388671875), 213063003146929.84, 0.0001);
    EXPECT_NEAR(Math::fade(297.65301513671875), 13901058090001.123, 0.0001);
}

TEST(MathTest, lerp)
{
    EXPECT_NEAR(
        Math::lerp(792.385986328125, -169.86199951171875, 4830.03076171875),
        3961675.0951429456, 0.0001);
    EXPECT_NEAR(
        Math::lerp(-10.378000259399414, -856.35198974609375, 4609.44189453125),
        -57580.362338600098, 0.0001);
    EXPECT_NEAR(
        Math::lerp(934.3480224609375, 591.4840087890625, 2638.72998046875),
        1913431.7091388255, 0.0001);
    EXPECT_NEAR(
        Math::lerp(-938.05499267578125, 626.38201904296875, 6138.3681640625),
        -5169919.7408762611, 0.0001);
    EXPECT_NEAR(
        Math::lerp(-326.76300048828125, 988.4940185546875, 9244.4521484375),
        -2696753.1564075723, 0.0001);
    EXPECT_NEAR(
        Math::lerp(-741.70501708984375, 179.98699951171875, 4614.1689453125),
        -3288675.0088901334, 0.0001);
    EXPECT_NEAR(
        Math::lerp(640.57098388671875, 669.98602294921875, 7207.50390625),
        4188414.2487059496, 0.0001);
    EXPECT_NEAR(
        Math::lerp(71.023002624511719, -930.34197998046875, 2978.29296875),
        276672.64824196184, 0.0001);
    EXPECT_NEAR(Math::lerp(358.2760009765625, -661.1240234375, 6043.578125),
                2401472.7494577169, 0.0001);
    EXPECT_NEAR(
        Math::lerp(-136.72799682617188, -204.89700317382812, 6143.880859375),
        -868260.57644382026, 0.0001);
    EXPECT_NEAR(
        Math::lerp(834.57598876953125, -53.2239990234375, 7778.19189453125),
        6535858.438829802, 0.0001);
    EXPECT_NEAR(
        Math::lerp(-653.28399658203125, 516.906005859375, 8168.11083984375),
        -4997892.76660721, 0.0001);
    EXPECT_NEAR(Math::lerp(922.176025390625, 579.9169921875, 4113.05419921875),
                3258754.3437319994, 0.0001);
    EXPECT_NEAR(
        Math::lerp(-816.96099853515625, 570.97100830078125, 4681.90576171875),
        -3357902.3900569193, 0.0001);
    EXPECT_NEAR(Math::lerp(-646.75, -814.8280029296875, 6144.251953125),
                -4501599.7895812988, 0.0001);
    EXPECT_NEAR(
        Math::lerp(-403.32000732421875, -268.09698486328125, 3570.43408203125),
        -1548424.4749990068, 0.0001);
    EXPECT_NEAR(
        Math::lerp(71.099998474121094, 347.19900512695312, 4640.9140625),
        305630.33303266135, 0.0001);
    EXPECT_NEAR(
        Math::lerp(-896.77899169921875, 910.37799072265625, 4513.634765625),
        -3230414.59943958, 0.0001);
    EXPECT_NEAR(
        Math::lerp(985.55999755859375, 135.55799865722656, 8049.59814453125),
        7799896.9448448727, 0.0001);
    EXPECT_NEAR(
        Math::lerp(428.98001098632812, 450.30099487304688, 3831.114990234375),
        1450751.9258677075, 0.0001);
    EXPECT_NEAR(
        Math::lerp(2.8159999847412109, 764.0260009765625, 8044.73486328125),
        21266.502046131762, 0.0001);
    EXPECT_NEAR(
        Math::lerp(543.19000244140625, 633.6920166015625, 7108.2880859375),
        3517569.5467263088, 0.0001);
    EXPECT_NEAR(
        Math::lerp(349.09799194335938, -123.79199981689453, 4125.259765625),
        1483211.6469793345, 0.0001);
    EXPECT_NEAR(
        Math::lerp(457.11300659179688, -688.114013671875, 5006.3740234375),
        2602336.4336304143, 0.0001);
    EXPECT_NEAR(
        Math::lerp(-462.52200317382812, 293.84799194335938, 8002.10205078125),
        -3564943.260274549, 0.0001);
    EXPECT_NEAR(
        Math::lerp(-894.16802978515625, 224.98500061035156, 1608.949951171875),
        -1237272.2281346982, 0.0001);
    EXPECT_NEAR(
        Math::lerp(-849.48699951171875, -274.927001953125, 9707.751953125),
        -8480430.9196400493, 0.0001);
    EXPECT_NEAR(
        Math::lerp(-57.867000579833984, 21.666000366210938, 4952.06005859375),
        -285285.44982589682, 0.0001);
    EXPECT_NEAR(
        Math::lerp(-475.39898681640625, 592.4010009765625, 3725.743896484375),
        -1488995.6368718222, 0.0001);
    EXPECT_NEAR(
        Math::lerp(-251.70700073242188, -572.44500732421875, 3874.34912109375),
        -1119861.6579459552, 0.0001);
    EXPECT_NEAR(
        Math::lerp(-409.0260009765625, 863.1719970703125, 8222.9697265625),
        -3009485.4612935036, 0.0001);
    EXPECT_NEAR(
        Math::lerp(-663.96002197265625, 173.05099487304688, 1933.5250244140625),
        -1168711.3243414704, 0.0001);
    EXPECT_NEAR(
        Math::lerp(76.154998779296875, -124.43699645996094, 9224.60546875),
        711851.88052919926, 0.0001);
    EXPECT_NEAR(
        Math::lerp(-85.759002685546875, -838.15899658203125, 9256.16015625),
        -866516.90233307146, 0.0001);
    EXPECT_NEAR(
        Math::lerp(733.70599365234375, 489.60198974609375, 5276.23486328125),
        3512470.8307158314, 0.0001);
    EXPECT_NEAR(Math::lerp(79.147003173828125, 814.958984375, 6780.51318359375),
                472970.6961235851, 0.0001);
    EXPECT_NEAR(
        Math::lerp(-866.0999755859375, 608.86102294921875, 1137.5179443359375),
        -457260.88568342477, 0.0001);
    EXPECT_NEAR(
        Math::lerp(-573.78802490234375, -763.01898193359375, 3038.10302734375),
        -2181801.309098009, 0.0001);
    EXPECT_NEAR(
        Math::lerp(-541.16802978515625, -24.195999145507812, 7939.998046875),
        -4309991.3967107357, 0.0001);
    EXPECT_NEAR(
        Math::lerp(518.7030029296875, -705.43798828125, 2413.055908203125),
        1616866.7107360661, 0.0001);
    EXPECT_NEAR(Math::lerp(277.84600830078125, -79.698997497558594, 1818.125),
                527223.12316463096, 0.0001);
    EXPECT_NEAR(
        Math::lerp(-356.40899658203125, 757.47698974609375, 1664.0849609375),
        -322365.7603158541, 0.0001);
    EXPECT_NEAR(
        Math::lerp(-390.22799682617188, 486.74301147460938, 2112.614990234375),
        -633974.022355753, 0.0001);
    EXPECT_NEAR(
        Math::lerp(178.14399719238281, 716.93902587890625, 9036.5673828125),
        1482808.7896851255, 0.0001);
    EXPECT_NEAR(
        Math::lerp(-769.7659912109375, -94.452003479003906, 6959.72607421875),
        -5430160.8321609562, 0.0001);
    EXPECT_NEAR(
        Math::lerp(695.5560302734375, 61.849998474121094, 457.69400024414062),
        275393.53247718047, 0.0001);
    EXPECT_NEAR(
        Math::lerp(926.031982421875, -985.14801025390625, 2741.783935546875),
        3450273.0301110595, 0.0001);
    EXPECT_NEAR(
        Math::lerp(778.79998779296875, 488.2340087890625, 7663.408203125),
        5588513.8089700416, 0.0001);
    EXPECT_NEAR(
        Math::lerp(621.14202880859375, -541.78900146484375, 6564.02294921875),
        4413176.6623784937, 0.0001);
    EXPECT_NEAR(
        Math::lerp(69.964996337890625, 841.06500244140625, 4699.28515625),
        270781.42393443547, 0.0001);
}

TEST(MathTest, grad)
{
    EXPECT_NEAR(
        Math::grad(198, -870.35302734375, 708.1190185546875, 590.6209716796875),
        -1460.9739990234375, 0.0001);
    EXPECT_NEAR(Math::grad(213, 506.60198974609375, -771.7659912109375,
                           684.010986328125),
                177.40899658203125, 0.0001);
    EXPECT_NEAR(Math::grad(152, 660.2039794921875, -929.78802490234375,
                           -13.737000465393066),
                -943.5250244140625, 0.0001);
    EXPECT_NEAR(Math::grad(244, 415.33099365234375, -258.59799194335938,
                           -159.63600158691406),
                255.69499206542969, 0.0001);
    EXPECT_NEAR(Math::grad(45, -58.456001281738281, -529.25799560546875,
                           575.56298828125),
                1104.821044921875, 0.0001);
    EXPECT_NEAR(Math::grad(85, 221.96800231933594, -928.36199951171875,
                           789.38702392578125),
                567.41900634765625, 0.0001);
    EXPECT_NEAR(Math::grad(245, -405.5, 560.4329833984375, -748.21099853515625),
                -342.71099853515625, 0.0001);
    EXPECT_NEAR(Math::grad(130, 58.394001007080078, 387.6510009765625,
                           450.5570068359375),
                -329.25698852539062, 0.0001);
    EXPECT_NEAR(Math::grad(186, 919.447021484375, -643.36700439453125,
                           685.76702880859375),
                -1329.134033203125, 0.0001);
    EXPECT_NEAR(Math::grad(28, 675.614990234375, -75.978996276855469,
                           -818.4849853515625),
                599.635986328125, 0.0001);
    EXPECT_NEAR(Math::grad(158, -719.7869873046875, 463.42800903320312,
                           -395.74301147460938),
                1183.2149658203125, 0.0001);
    EXPECT_NEAR(Math::grad(68, 402.66000366210938, 610.27899169921875,
                           496.75201416015625),
                899.4119873046875, 0.0001);
    EXPECT_NEAR(Math::grad(157, -129.20599365234375, -729.41302490234375,
                           750.28997802734375),
                1479.7030029296875, 0.0001);
    EXPECT_NEAR(Math::grad(210, 375.69699096679688, 857.98199462890625,
                           778.65997314453125),
                -482.28500366210938, 0.0001);
    EXPECT_NEAR(
        Math::grad(172, 520.60302734375, -477.83200073242188, 797.9580078125),
        42.771026611328125, 0.0001);
    EXPECT_NEAR(Math::grad(220, 805.51202392578125, 186.11300659179688,
                           599.52197265625),
                991.625, 0.0001);
    EXPECT_NEAR(Math::grad(18, -189.30799865722656, -710.48602294921875,
                           936.46502685546875),
                521.17803955078125, 0.0001);
    EXPECT_NEAR(Math::grad(46, -565.906982421875, 450.22601318359375,
                           -75.717002868652344),
                1016.1329956054688, 0.0001);
    EXPECT_NEAR(Math::grad(124, 731.88897705078125, 517.46502685546875,
                           -916.68597412109375),
                1249.35400390625, 0.0001);
    EXPECT_NEAR(Math::grad(33, 94.863998413085938, -965.281982421875,
                           -318.19900512695312),
                -1060.14599609375, 0.0001);
    EXPECT_NEAR(Math::grad(54, 176.27000427246094, -468.06500244140625,
                           739.9539794921875),
                -563.6839599609375, 0.0001);
    EXPECT_NEAR(
        Math::grad(61, 457.06298828125, 430.17300415039062, 403.51300048828125),
        -26.660003662109375, 0.0001);
    EXPECT_NEAR(Math::grad(105, -970.166015625, -561.88702392578125,
                           -258.51800537109375),
                303.3690185546875, 0.0001);
    EXPECT_NEAR(Math::grad(25, -16.891000747680664, 756.7769775390625,
                           823.07000732421875),
                66.29302978515625, 0.0001);
    EXPECT_NEAR(Math::grad(159, -246.55499267578125, -587.74798583984375,
                           -262.14498901367188),
                849.8929443359375, 0.0001);
    EXPECT_NEAR(
        Math::grad(5, -626.677978515625, -258.906005859375, -549.197998046875),
        77.47998046875, 0.0001);
    EXPECT_NEAR(Math::grad(216, -514.64398193359375, 207.35000610351562,
                           -622.35797119140625),
                -415.00796508789062, 0.0001);
    EXPECT_NEAR(Math::grad(10, 237.76199340820312, 54.5, -712.6300048828125),
                767.1300048828125, 0.0001);
    EXPECT_NEAR(
        Math::grad(135, 478.25399780273438, 680.625, -726.79302978515625),
        248.53903198242188, 0.0001);
    EXPECT_NEAR(Math::grad(68, -829.0989990234375, -259.02099609375,
                           232.74600219726562),
                -596.35302734375, 0.0001);
    EXPECT_NEAR(Math::grad(186, 509.61300659179688, -123.50900268554688,
                           -938.84002685546875),
                815.3310546875, 0.0001);
    EXPECT_NEAR(Math::grad(196, 877.6920166015625, 97.303001403808594,
                           -553.4329833984375),
                324.259033203125, 0.0001);
    EXPECT_NEAR(
        Math::grad(178, 708.14697265625, 478.33401489257812, 387.2130126953125),
        229.81295776367188, 0.0001);
    EXPECT_NEAR(Math::grad(32, -818.33697509765625, 960.302978515625,
                           744.6300048828125),
                141.96600341796875, 0.0001);
    EXPECT_NEAR(Math::grad(140, -708.8330078125, -480.6400146484375,
                           659.22198486328125),
                -1189.4730224609375, 0.0001);
    EXPECT_NEAR(Math::grad(109, 702.68499755859375, 466, 296.55999755859375),
                -169.44000244140625, 0.0001);
    EXPECT_NEAR(Math::grad(245, -273.11300659179688, -176.62600708007812,
                           32.569000244140625),
                305.6820068359375, 0.0001);
    EXPECT_NEAR(Math::grad(196, -275.56298828125, 890.71600341796875,
                           -435.718994140625),
                -711.281982421875, 0.0001);
    EXPECT_NEAR(Math::grad(123, -99.195999145507812, -208.44700622558594,
                           441.88900756835938),
                -233.44200134277344, 0.0001);
    EXPECT_NEAR(Math::grad(230, 928.7340087890625, 489.7650146484375,
                           286.13900756835938),
                642.594970703125, 0.0001);
    EXPECT_NEAR(Math::grad(39, -42.053001403808594, 555.36297607421875,
                           344.92401123046875),
                -302.87100219726562, 0.0001);
    EXPECT_NEAR(Math::grad(64, 692.59600830078125, -903.61102294921875,
                           574.9119873046875),
                -211.0150146484375, 0.0001);
    EXPECT_NEAR(Math::grad(195, 711.0989990234375, -423.41598510742188,
                           -574.94500732421875),
                -287.68301391601562, 0.0001);
    EXPECT_NEAR(Math::grad(211, -56.078998565673828, -215.77799987792969,
                           -49.226001739501953),
                271.85699462890625, 0.0001);
    EXPECT_NEAR(Math::grad(48, -61.476001739501953, -658.02398681640625,
                           -387.54098510742188),
                -719.5, 0.0001);
    EXPECT_NEAR(Math::grad(148, -93.544998168945312, 260.25601196289062,
                           29.201000213623047),
                -64.343994140625, 0.0001);
    EXPECT_NEAR(Math::grad(245, 92.457000732421875, 194.91299438476562,
                           -504.56399536132812),
                -597.02099609375, 0.0001);
    EXPECT_NEAR(Math::grad(23, 155.781005859375, -369.55099487304688,
                           -55.146999359130859),
                -100.63400268554688, 0.0001);
    EXPECT_NEAR(Math::grad(211, 208.7760009765625, 360.07199096679688,
                           576.59600830078125),
                -568.8480224609375, 0.0001);
    EXPECT_NEAR(Math::grad(176, -170.04800415039062, -842.927978515625,
                           424.22000122070312),
                -1012.9759521484375, 0.0001);
}